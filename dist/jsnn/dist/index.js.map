{"version":3,"sources":["../../../jsnn/dist/index.js"],"names":["Object","defineProperty","exports","value","_createClass","defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","key","Constructor","protoProps","staticProps","prototype","_classCallCheck","instance","TypeError","NeuronType","NONE","INPUT","HIDDEN","OUTPUT","LinkType","INPUT_TO_HIDDEN","HIDDEN_TO_HIDDEN","HIDDEN_TO_OUTPUT","Tools","sigmoidaFn","x","Math","exp","derivativeFn","randomGenerator","random","toFixed","Neuron","type","arguments","undefined","bias","fn","computeValue","inputValue","getValue","setValue","setError","error","setBias","getError","Link","neuronFromKey","neuronToKey","generateWeight","weight","setDeltaWeight","delta","prevDeltaWeight","deltaWeight","getDeltaWeight","getPrevDeltaWeight","setWeight","getWeight","NN","networkConfiguration","config","networkPreInit","createReferences","inputSize","layers","find","l","size","hiddenSize","outputSize","network","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_iterator","Symbol","iterator","_step","next","done","layer","createLayer","err","return","push","references","h","o","computeNeuronsValue","neuronType","linkType","print","_this","filter","forEach","r","reduce","prev","curr","computeGlobalError","derivativeFunc","_this2","n","computeHiddenErrors","_this3","ref","hiddenNeuron","newWeight","adjustInputs","_this4","trainNetwork","trainInputs","trainAnswers","_this5","prevError","learnCycles","_loop","randomSet","run","data","_this6","console","log","N"],"mappings":"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","file":"index.js","sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar NeuronType = exports.NeuronType = {\n    NONE: \"NONE\",\n    INPUT: \"INPUT\",\n    HIDDEN: \"HIDDEN\",\n    OUTPUT: \"OUTPUT\"\n};\n\nvar LinkType = exports.LinkType = {\n    NONE: \"NONE\",\n    INPUT_TO_HIDDEN: \"INPUT_TO_HIDDEN\",\n    HIDDEN_TO_HIDDEN: \"HIDDEN_TO_HIDDEN\",\n    HIDDEN_TO_OUTPUT: \"HIDDEN_TO_OUTPUT\"\n};\n\nvar Tools = exports.Tools = function () {\n    function Tools() {\n        _classCallCheck(this, Tools);\n    }\n\n    _createClass(Tools, null, [{\n        key: \"sigmoidaFn\",\n        value: function sigmoidaFn(x) {\n            return 1.0 / (1.0 + Math.exp(-x));\n        }\n    }, {\n        key: \"derivativeFn\",\n        value: function derivativeFn(x) {\n            return x * (1 - x);\n        }\n    }, {\n        key: \"randomGenerator\",\n        value: function randomGenerator() {\n            return +(Math.random() * (0.9 - 0) + 0).toFixed(4);\n        }\n    }]);\n\n    return Tools;\n}();\n\nvar Neuron = exports.Neuron = function () {\n    function Neuron() {\n        var type = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : NeuronType.NONE;\n        var key = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : -1;\n\n        _classCallCheck(this, Neuron);\n\n        this.type = type;\n        this.value = 0.0;\n        this.key = key;\n        this.bias = Tools.randomGenerator();\n    }\n\n    _createClass(Neuron, [{\n        key: \"fn\",\n        value: function fn(x) {\n            return Tools.sigmoidaFn(x);\n        }\n    }, {\n        key: \"computeValue\",\n        value: function computeValue(inputValue) {\n            this.value = this.fn(inputValue);\n        }\n    }, {\n        key: \"getValue\",\n        value: function getValue() {\n            return this.value;\n        }\n    }, {\n        key: \"setValue\",\n        value: function setValue(value) {\n            this.value = value;\n        }\n    }, {\n        key: \"setError\",\n        value: function setError(error) {\n            this.error = error;\n            this.setBias();\n        }\n    }, {\n        key: \"getError\",\n        value: function getError() {\n            return this.error;\n        }\n    }, {\n        key: \"setBias\",\n        value: function setBias() {\n            this.bias += this.error;\n        }\n    }]);\n\n    return Neuron;\n}();\n\nvar Link = exports.Link = function () {\n    function Link() {\n        var type = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : LinkType.NONE;\n        var neuronFromKey = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : -1;\n        var neuronToKey = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : -1;\n\n        _classCallCheck(this, Link);\n\n        this.type = type;\n        this.neuronFromKey = neuronFromKey;\n        this.neuronToKey = neuronToKey;\n        this.generateWeight();\n    }\n\n    _createClass(Link, [{\n        key: \"generateWeight\",\n        value: function generateWeight() {\n            this.weight = Tools.randomGenerator();\n        }\n    }, {\n        key: \"setDeltaWeight\",\n        value: function setDeltaWeight(delta) {\n            this.prevDeltaWeight = this.deltaWeight;\n            this.deltaWeight = delta;\n        }\n    }, {\n        key: \"getDeltaWeight\",\n        value: function getDeltaWeight() {\n            return this.deltaWeight;\n        }\n    }, {\n        key: \"getPrevDeltaWeight\",\n        value: function getPrevDeltaWeight() {\n            return this.prevDeltaWeight;\n        }\n    }, {\n        key: \"setWeight\",\n        value: function setWeight(weight) {\n            this.weight = weight;\n        }\n    }, {\n        key: \"getWeight\",\n        value: function getWeight() {\n            return this.weight;\n        }\n    }]);\n\n    return Link;\n}();\n\nvar NN = exports.NN = function () {\n    function NN(networkConfiguration) {\n        _classCallCheck(this, NN);\n\n        this.config = networkConfiguration;\n\n        this.networkPreInit();\n        this.createReferences();\n    }\n\n    _createClass(NN, [{\n        key: \"networkPreInit\",\n        value: function networkPreInit() {\n            this.inputSize = this.config.layers.find(function (l) {\n                return l.type === NeuronType.INPUT;\n            }).size;\n            this.hiddenSize = this.config.layers.find(function (l) {\n                return l.type === NeuronType.HIDDEN;\n            }).size;\n            this.outputSize = this.config.layers.find(function (l) {\n                return l.type === NeuronType.OUTPUT;\n            }).size;\n\n            this.network = [];\n            var _iteratorNormalCompletion = true;\n            var _didIteratorError = false;\n            var _iteratorError = undefined;\n\n            try {\n                for (var _iterator = this.config.layers[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n                    var layer = _step.value;\n\n                    this.createLayer(layer);\n                }\n            } catch (err) {\n                _didIteratorError = true;\n                _iteratorError = err;\n            } finally {\n                try {\n                    if (!_iteratorNormalCompletion && _iterator.return) {\n                        _iterator.return();\n                    }\n                } finally {\n                    if (_didIteratorError) {\n                        throw _iteratorError;\n                    }\n                }\n            }\n        }\n    }, {\n        key: \"createLayer\",\n        value: function createLayer(layer) {\n            for (var i = 0; i < layer.size; i++) {\n                this.network.push(new Neuron(layer.type, i));\n            }\n        }\n    }, {\n        key: \"createReferences\",\n        value: function createReferences() {\n            this.references = [];\n            for (var h = 0; h < this.hiddenSize; h++) {\n                for (var i = 0; i < this.inputSize; i++) {\n                    this.references.push(new Link(LinkType.INPUT_TO_HIDDEN, i, h));\n                }for (var o = 0; o < this.outputSize; o++) {\n                    this.references.push(new Link(LinkType.HIDDEN_TO_OUTPUT, h, o));\n                }\n            }\n        }\n    }, {\n        key: \"computeNeuronsValue\",\n        value: function computeNeuronsValue(neuronType, linkType, fn, print) {\n            var _this = this;\n\n            return this.network.filter(function (h) {\n                return h.type === neuronType;\n            }).forEach(function (h) {\n                h.computeValue(_this.references.filter(function (r) {\n                    return r.type === linkType && r.neuronToKey === h.key;\n                }).reduce(function (prev, curr) {\n                    return prev + curr.weight * fn(curr);\n                }, 0) + h.bias);\n                if (neuronType === NeuronType.OUTPUT) if (print) print(h.getValue());\n            });\n        }\n    }, {\n        key: \"computeGlobalError\",\n        value: function computeGlobalError(derivativeFunc) {\n            var _this2 = this;\n\n            this.network.filter(function (n) {\n                return n.type === NeuronType.OUTPUT;\n            }).forEach(function (o) {\n                _this2.error = Tools.derivativeFn(o.getValue()) * (derivativeFunc(o) - o.getValue());\n                o.setError(_this2.error);\n                _this2.computeHiddenErrors(o);\n            });\n        }\n    }, {\n        key: \"computeHiddenErrors\",\n        value: function computeHiddenErrors(o) {\n            var _this3 = this;\n\n            this.references.filter(function (r) {\n                return r.type === LinkType.HIDDEN_TO_OUTPUT && r.neuronToKey === o.key;\n            }).forEach(function (ref) {\n                var hiddenNeuron = _this3.network.find(function (n) {\n                    return n.type === NeuronType.HIDDEN && n.key === ref.neuronFromKey;\n                });\n                var newWeight = ref.getWeight() + o.error * hiddenNeuron.value;\n                ref.setWeight(newWeight);\n                hiddenNeuron.setError(Tools.derivativeFn(hiddenNeuron.getValue()) * o.error * newWeight);\n            });\n        }\n    }, {\n        key: \"adjustInputs\",\n        value: function adjustInputs(derivativeFunc) {\n            var _this4 = this;\n\n            this.network.filter(function (h) {\n                return h.type === NeuronType.HIDDEN;\n            }).forEach(function (h) {\n                _this4.references.filter(function (r) {\n                    return r.type === LinkType.INPUT_TO_HIDDEN && r.neuronToKey === h.key;\n                }).forEach(function (ref) {\n                    var newWeight = ref.getWeight() + h.getError() * derivativeFunc(ref);\n                    ref.setWeight(newWeight);\n                    h.setBias();\n                });\n            });\n        }\n    }, {\n        key: \"trainNetwork\",\n        value: function trainNetwork(trainInputs, trainAnswers, fn) {\n            var _this5 = this;\n\n            this.prevError = 2;\n            this.error = 1;\n            this.learnCycles = 0;\n            while (this.learnCycles < 1000) {\n                this.learnCycles++;\n\n                var _loop = function _loop(randomSet) {\n                    _this5.computeNeuronsValue(NeuronType.HIDDEN, LinkType.INPUT_TO_HIDDEN, function (curr) {\n                        return trainInputs[randomSet][curr.neuronFromKey];\n                    });\n                    _this5.computeNeuronsValue(NeuronType.OUTPUT, LinkType.HIDDEN_TO_OUTPUT, function (curr) {\n                        return _this5.network.find(function (n) {\n                            return n.type === NeuronType.HIDDEN && n.key === curr.neuronFromKey;\n                        }).value;\n                    });\n\n                    _this5.computeGlobalError(function (o) {\n                        return trainAnswers[randomSet][o.key];\n                    });\n                    _this5.adjustInputs(function (ref) {\n                        return trainInputs[randomSet][ref.neuronFromKey];\n                    });\n                };\n\n                for (var randomSet = 0; randomSet < trainInputs.length; randomSet++) {\n                    _loop(randomSet);\n                }\n                if (this.learnCycles === 1000) return fn();\n            }\n        }\n    }, {\n        key: \"run\",\n        value: function run(data) {\n            var _this6 = this;\n\n            this.computeNeuronsValue(NeuronType.HIDDEN, LinkType.INPUT_TO_HIDDEN, function (ref) {\n                return data[ref.neuronFromKey];\n            });\n            this.computeNeuronsValue(NeuronType.OUTPUT, LinkType.HIDDEN_TO_OUTPUT, function (curr) {\n                return _this6.network.find(function (n) {\n                    return n.type === NeuronType.HIDDEN && n.key === curr.neuronFromKey;\n                }).value;\n            }, function (value) {\n                console.log('OUT ', value);\n            });\n        }\n    }]);\n\n    return NN;\n}();\n\nvar N = new NN({\n    layers: [{\n        type: NeuronType.INPUT,\n        size: 15\n    }, {\n        type: NeuronType.HIDDEN,\n        size: 15\n    }, {\n        type: NeuronType.OUTPUT,\n        size: 10\n    }]\n});\n\nN.trainNetwork([[0, 1, 1, 1, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1], //1\n[1, 1, 1, 0, 0, 1, 0, 1, 0, 1, 0, 0, 1, 1, 1], //2\n[1, 1, 1, 0, 0, 1, 1, 1, 1, 0, 0, 1, 1, 1, 1], //3\n[1, 0, 1, 1, 0, 1, 1, 1, 1, 0, 0, 1, 0, 0, 1], // 4\n[1, 1, 1, 1, 0, 0, 1, 1, 1, 0, 0, 1, 1, 1, 1], // 5\n[1, 1, 1, 1, 0, 1, 1, 0, 0, 1, 1, 1, 1, 1, 1], //6\n[1, 1, 1, 0, 0, 1, 0, 1, 0, 0, 1, 0, 1, 0, 0], // 7\n[1, 1, 1, 1, 0, 1, 1, 1, 1, 1, 0, 1, 1, 1, 1], // 8\n[1, 1, 1, 1, 0, 1, 1, 1, 1, 0, 0, 1, 1, 1, 1], // 9\n[1, 1, 1, 1, 0, 1, 1, 0, 1, 1, 0, 1, 1, 1, 1]], [[1, 0, 0, 0, 0, 0, 0, 0, 0, 0], [0, 1, 0, 0, 0, 0, 0, 0, 0, 0], [0, 0, 1, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 1, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 1, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 1, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 1, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0, 1, 0, 0], [0, 0, 0, 0, 0, 0, 0, 0, 1, 0], [0, 0, 0, 0, 0, 0, 0, 0, 0, 1]], function () {\n    console.log('RESULTS : ');\n    N.run([0, 1, 1, 1, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1]);\n});"]}