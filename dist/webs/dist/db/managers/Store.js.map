{"version":3,"sources":["../../../../../webs/dist/db/managers/Store.js"],"names":["Object","defineProperty","exports","value","Store","undefined","_createClass","defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","key","Constructor","protoProps","staticProps","prototype","_mongoose","require","_mongoose2","_interopRequireDefault","obj","__esModule","default","_classCallCheck","instance","TypeError","connect","StoreInstance","time","Date","getTime","responseWrapper","err","response","fn","state","r","e","saveInstance","instanceToSave","_this","save","removeInstance","_model","removeCriteria","_this2","remove","exec","updateInstance","findInstance","findCriteria","_this3","findOne","findInstanceWithSort","sortOptions","_this4","sort","findInstances","options","_this5","find","findInstanceWithPopulate","populateQuery","_this6","populate","findInstancesWithPopulate","_this7","skip","limit","externalPopulate","pathName","path","saveInstanceWithPopulate","_this8"],"mappings":"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","file":"Store.js","sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.Store = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _mongoose = require(\"mongoose\");\n\nvar _mongoose2 = _interopRequireDefault(_mongoose);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n_mongoose2.default.connect(\"mongodb://localhost:27017\");\n\nvar StoreInstance = null;\n\nvar Store = exports.Store = function () {\n    function Store() {\n        _classCallCheck(this, Store);\n\n        if (!StoreInstance) StoreInstance = this;\n\n        this.time = new Date();\n\n        return StoreInstance;\n    }\n\n    _createClass(Store, [{\n        key: \"getTime\",\n        value: function getTime() {\n            return this.time;\n        }\n    }, {\n        key: \"responseWrapper\",\n        value: function responseWrapper(err, response, fn) {\n            if (!err) {\n                return fn({ state: true, r: response });\n            } else {\n                return fn({ state: false, e: err });\n            }\n        }\n    }, {\n        key: \"saveInstance\",\n        value: function saveInstance(instanceToSave, fn) {\n            var _this = this;\n\n            if (instanceToSave && fn) {\n                instanceToSave.save(function (err, response) {\n                    return _this.responseWrapper(err, response, fn);\n                });\n            }\n        }\n    }, {\n        key: \"removeInstance\",\n        value: function removeInstance(_model, removeCriteria, fn) {\n            var _this2 = this;\n\n            if (removeCriteria, fn) {\n                return _model.remove(removeCriteria).exec(function (err, response) {\n                    return _this2.responseWrapper(err, response, fn);\n                });\n            }\n        }\n\n        //UPDATE INSTANCE (NOT IMPLEMENTED)\n\n    }, {\n        key: \"updateInstance\",\n        value: function updateInstance() {}\n    }, {\n        key: \"findInstance\",\n        value: function findInstance(_model, findCriteria, fn) {\n            var _this3 = this;\n\n            if (findCriteria && fn) {\n                return _model.findOne(findCriteria).exec(function (err, response) {\n                    return _this3.responseWrapper(err, response, fn);\n                });\n            }\n        }\n    }, {\n        key: \"findInstanceWithSort\",\n        value: function findInstanceWithSort(_model, findCriteria, sortOptions, fn) {\n            var _this4 = this;\n\n            return _model.findOne(findCriteria).sort(sortOptions).exec(function (err, response) {\n                return _this4.responseWrapper(err, response, fn);\n            });\n        }\n    }, {\n        key: \"findInstances\",\n        value: function findInstances(_model, findCriteria, options, fn) {\n            var _this5 = this;\n\n            if (findCriteria && fn) {\n                return _model.find(findCriteria).sort(options).exec(function (err, response) {\n                    return _this5.responseWrapper(err, response, fn);\n                });\n            }\n        }\n    }, {\n        key: \"findInstanceWithPopulate\",\n        value: function findInstanceWithPopulate(_model, findCriteria, populateQuery, fn) {\n            var _this6 = this;\n\n            if (findCriteria && fn) {\n                return _model.findOne(findCriteria).populate(populateQuery).exec(function (err, response) {\n                    return _this6.responseWrapper(err, response, fn);\n                });\n            }\n        }\n    }, {\n        key: \"findInstancesWithPopulate\",\n        value: function findInstancesWithPopulate(_model, findCriteria, options, populateQuery, fn) {\n            var _this7 = this;\n\n            if (findCriteria && fn) {\n                return _model.find(findCriteria).sort(options).skip(0).limit(5).populate(populateQuery).exec(function (err, response) {\n                    return _this7.responseWrapper(err, response, fn);\n                });\n            }\n        }\n    }, {\n        key: \"externalPopulate\",\n        value: function externalPopulate(_model, instance, pathName, fn) {\n            _model.populate(instance, { path: pathName }, fn);\n        }\n    }, {\n        key: \"saveInstanceWithPopulate\",\n        value: function saveInstanceWithPopulate(_model, pathName, instanceToSave, fn) {\n            var _this8 = this;\n\n            if (instanceToSave && fn) {\n                instanceToSave.save(function (err, response) {\n                    if (!err && response) {\n                        return _this8.externalPopulate(_model, response, pathName, function (err, response) {\n                            return _this8.responseWrapper(err, response, fn);\n                        });\n                    }\n                });\n            }\n        }\n    }]);\n\n    return Store;\n}();"]}